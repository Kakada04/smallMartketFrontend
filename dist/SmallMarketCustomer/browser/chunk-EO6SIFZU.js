import{B as x,C as c,F as b,L as f,S as I,Sa as k,T as v,X as _,Y as e,Z as i,a as w,b as g,ea as h,ga as m,ia as d,ka as n,la as C,ma as p,r as s,s as u,y}from"./chunk-D7SAB5FQ.js";function q(o,a){if(o&1){let t=h();e(0,"div",0)(1,"img",2),m("click",function(){s(t);let r=d();return u(r.viewDetail(r.product.id))}),i(),e(2,"div",3)(3,"h3",4),n(4),i(),e(5,"div",5)(6,"span",6),n(7,"\u2605\u2605\u2605\u2605\u2606"),i(),e(8,"span",7),n(9,"(5.00)"),i()(),e(10,"div",8)(11,"span",9),n(12),i()(),e(13,"div",10)(14,"button",11),m("click",function(){s(t);let r=d();return u(r.decreasequantity())}),n(15,"-"),i(),e(16,"span",12),n(17),i(),e(18,"button",13),m("click",function(){s(t);let r=d();return u(r.increasequantity())}),n(19,"+"),i()()()()}if(o&2){let t=d();c(),_("src","http://smallmarketbackendlaravel-production.up.railway.app/storage/"+t.product.banner_img,x),c(3),p(" ",t.cartItem.product==null?null:t.cartItem.product.product_name," "),c(8),p("$",t.cartItem.product==null?null:t.cartItem.product.sell_price),c(5),C(t.cartItem.quantity)}}function S(o,a){if(o&1){let t=h();e(0,"div",1)(1,"img",14),m("click",function(){s(t);let r=d();return u(r.viewDetail(r.product.id))}),i(),e(2,"div",3)(3,"h3",4),n(4),i(),e(5,"div",5)(6,"span",6),n(7,"\u2605\u2605\u2605\u2605\u2606"),i(),e(8,"span",7),n(9,"(5.00)"),i()(),e(10,"div",8)(11,"span",15),n(12,"$160.00"),i(),e(13,"span",9),n(14),i()(),e(15,"button",16),m("click",function(){s(t);let r=d();return u(r.addToCartClicked())}),n(16," Add to Cart "),i()()()}if(o&2){let t=d();c(),_("src","http://smallmarketbackendlaravel-production.up.railway.app/storage/"+t.product.banner_img,x),c(3),p(" ",t.product.product_name," "),c(10),C(t.product.sell_price)}}var P=class o{product={};cartItem=void 0;addToCart=new f;updateCart=new f;choose=!1;ngOnChanges(a){(a.cartItem||a.product)&&this.cartOrProduct()}cartOrProduct(){this.choose=!!this.cartItem&&this.cartItem.product_id===this.product.id}addToCartClicked(){if(!localStorage.getItem("Token")){window.location.href="/login";return}this.cartItem={product_id:this.product.id,quantity:1,product:g(w({},this.product),{id:this.product.id??0})},this.choose=!0,this.addToCart.emit({productId:this.product.id,quantity:1})}increasequantity(){this.cartItem&&(this.cartItem.quantity=(this.cartItem.quantity||0)+1,this.updateCart.emit({productId:this.cartItem.product_id,quantity:this.cartItem.quantity}))}decreasequantity(){this.cartItem&&this.cartItem.quantity&&(this.cartItem.quantity>1?(this.cartItem.quantity--,this.updateCart.emit({productId:this.cartItem.product_id,quantity:this.cartItem.quantity})):this.cartItem.quantity===1&&(console.log("Removing item from cart",this.cartItem.product?.id),this.updateCart.emit({productId:this.cartItem.product?.id,quantity:0}),this.cartItem=void 0,this.choose=!1))}viewDetail(a){a&&localStorage.setItem("product_id_detail",a)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-product-card"]],inputs:{product:"product",cartItem:"cartItem"},outputs:{addToCart:"addToCart",updateCart:"updateCart"},features:[y],decls:2,vars:1,consts:[[1,"bg-white","shadow-lg","rounded-lg","overflow-hidden","flex-shrink-0","w-40","sm:w-64","snap-center","flex","flex-col","justify-center","items-center"],[1,"bg-white","cursor-pointer","shadow-lg","rounded-lg","overflow-hidden","flex-shrink-0","w-40","sm:w-64","snap-center","animate-slide-from-bottom","flex","flex-col","justify-center","items-center"],["routerLink","/productdetail","alt","loading...",1,"sm:h-48",2,"height","200px","object-fit","contain",3,"click","src"],[1,"p-4","w-full"],[1,"text-sm","font-semibold","text-gray-800","flex","whitespace-nowrap","flex-col","px-1","overflow-hidden"],[1,"flex","items-center","mt-1"],[1,"text-yellow-400","text-xs","sm:text-sm"],[1,"text-gray-600","text-xs","ml-1"],[1,"mt-2"],[1,"text-red-600","font-bold","ml-2","text-xs","sm:text-sm"],[1,"w-full","flex","flex-row","justify-between","items-center","gap-4","mt-4"],[1,"w-full","bg-red-500","rounded-2xl","text-white",3,"click"],[1,"w-full","text-center","text-gray-800","text-xs","sm:text-sm"],[1,"w-full","bg-blue-500","rounded-2xl","text-white",3,"click"],["routerLink","/productdetail","alt","Fig",1,"sm:h-48",2,"height","200px","object-fit","contain",3,"click","src"],[1,"text-gray-500","line-through","text-xs","sm:text-sm"],[1,"mt-2","w-full","bg-blue-600","text-white","py-1","rounded","hover:bg-blue-700","transition","duration-200","text-xs","sm:text-sm",3,"click"]],template:function(t,l){t&1&&I(0,q,20,4,"div",0)(1,S,17,3,"div",1),t&2&&v(l.choose&&l.cartItem?0:1)},dependencies:[k],styles:["@keyframes _ngcontent-%COMP%_slide-from-bottom{0%{transform:scale(0)}to{transform:scale(1)}}.animate-slide-from-bottom[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-from-bottom .3s ease-out forwards}@keyframes _ngcontent-%COMP%_slide-out{0%{transform:translate(0);opacity:1}to{transform:translate(-100%);opacity:0}}.animate-slide-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-out .5s ease-in forwards}.product-title[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:1;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.product-description[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:3;line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}"]})};export{P as ProductCard};
